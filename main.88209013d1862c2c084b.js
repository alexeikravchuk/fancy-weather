!function(e){function t(t){for(var r,i,c=t[0],s=t[1],u=t[2],h=0,d=[];h<c.length;h++)i=c[h],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);d.length;)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;o.push([124,1]),n()}({121:function(e){e.exports=JSON.parse('{"lang":["ru","en","be"],"placeholder":"Искать город","search":"искать","feel":"Ощущается как:","wind":"Ветер:","ms":"м/с","humidity":"Влажность:","day":["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],"dayShort":["Вск","Пнд","Втр","Срд","Чтв","Птн","Сбт"],"month":["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],"lat":"Широта","lng":"Долгота","wether":{"200":"Гроза с небольшим дождем","201":"Гроза с дождем","202":"Гроза с проливным дождем","231":"Гроза с моросящим дождем","232":"Гроза с сильным моросящим дождем","233":"Гроза с градом","300":"Легкая морось","301":"Морось","302":"Сильный дождь","500":"Легкий дождь","501":"Умеренный дождь","502":"Сильный дождь","511":"Дождь со снегом","520":"Слабый дождь","521":"Ливень","522":"Сильный ливень","600":"Легкий снег","601":"Снег","602":"Сильный снегопад","610":"Смешать снег / дождь","611":"Мокрый снег","612":"Тяжелый мокрый снег","621":"Снегопад","622":"Сильный снегопад","623":"Снегопад","700":"Мгла","711":"Дым","721":"Туман","731":"Песок / пыль","741":"Туман","751":"Морозный туман","800":"Безоблачно","801":"Слабая облачность","802":"Переменная облачность","803":"Облачно с прояснениями","804":"Пасмурно","900":"Неизвестные осадки"},"error":"Нет такого места","speech":{"in":"В","on":"В","now":"сейчас","degrees":"градусов","belowZero":"ниже нуля","celsius":"по цельсию","fahrenheit":"по фаренгейту","ms":"метров в секунду","dayExpected":"днём ожидается до","nightExpected":"ночью до","inDay":["в воскресенье","в понедельник","во вторник","в среду","в четверг","в пятницу","в субботу"]},"keyWords":{"weather":"прогноз","forecast":"погода","louder":"громче","quieter":"тише"}}')},122:function(e){e.exports=JSON.parse('{"lang":["be","en","ru"],"placeholder":"Шукаць горад","search":"знайсці","feel":"Адчуваецца як:","wind":"Вецер:","ms":"м/с","humidity":"Вільготнасць:","day":["Нядзеля","Панядзелак","Аўторак","Серада","Чацверг","Пятнiца","Субота"],"dayShort":["Няд","Пнд","Аўт","Сер","Чцв","Пят","Суб"],"month":["Студзеня","Лютага","Сакавіка","Красавіка","Мая","Чэрвеня","Ліпеня","Аўгуста","Верасеня","Кастрычніка","Лістапада","Снежаня"],"lat":"Шырата","lng":"Даўгата","wether":{"200":"Навальніца з невялікім дажджом","201":"Навальніца з дажджом","202":"Навальніца з праліўным дажджам","231":"Навальніца з маросячым даждем","232":"Навальніца з сільным маросячым дождем","233":"Навальніца з градом","300":"Легкая марось","301":"Марось","302":"Сильный дождж","500":"Легкі дождж","501":"Умеренный дождж","502":"Сильный дождж","511":"Дождж со снегом","520":"Слабый дождж","521":"Лівень","522":"Сильный ливень","600":"Легкі снег","601":"Снег","602":"Сільны снегапад","610":"Смешаны снег / дождж","611":"Мокрый снег","612":"Цяжкі мокры снег","621":"Снегапад","622":"Сільны снегапад","623":"Снегапад","700":"Імгла","711":"Дым","721":"Туман","731":"Песок / пыль","741":"Туман","751":"Морозный туман","800":"Бясхмарна","801":"Слабая воблачнасць","802":"Пераменная воблачнасць","803":"Пагодна","804":"Пахмурна","900":"Невядомыя ападкі"},"error":"Няма такога месца","speech":{"in":"У","on":"У","now":"зараз","degrees":"градусов","belowZero":"нижэй за нуль","celsius":"по цельсию","fahrenheit":"по фаренхгейту","ms":"метрау у сякунду","dayExpected":"у день чакаецца да","nightExpected":"нОччу да","inDay":["у нядзелю","у панядзелак","у аўторак","у сераду","у чацверг","у пятнiца","у суботу"]},"keyWords":{"weather":"прагноз","forecast":"надвор","louder":"гучней","quieter":"цішэй"}}')},123:function(e){e.exports=JSON.parse('{"lang":["en","ru","be"],"placeholder":"Search city","search":"search","feel":"Feels like:","wind":"Wind:","ms":"m/s","humidity":"Humidity:","day":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"month":["January","February","March","April","May","June","July","August","September","October","November","December"],"lat":"Latitude","lng":"Longitude","wether":{"200":"Thunderstorm with light rain","201":"Thunderstorm with rain","202":"Thunderstorm with heavy rain","231":"Thunderstorm with drizzle","232":"Thunderstorm with heavy drizzle","233":"Thunderstorm with Hail","300":"Light Drizzle","301":"Drizzle","302":"Heavy Drizzle","500":"Light Rain","501":"Moderate Rain","502":"Heavy Rain","511":"Freezing rain","520":"Light shower rain","521":"Shower rain","522":"Heavy shower rain","600":"Light snow","601":"Snow","602":"Heavy Snow","610":"Mix snow/rain","611":"Sleet","612":"Heavy sleet","621":"Snow shower","622":"Heavy snow shower","623":"Flurries","700":"Mist","711":"Smoke","721":"Haze","731":"Sand/dust","741":"Fog","751":"Freezing Fog","800":"Clear sky","801":"Few clouds","802":"Scattered clouds","803":"Broken clouds","804":"Overcast clouds","900":"Unknown Precipitation"},"error":"There is no such place","speech":{"in":"In","on":"On","now":"now","degrees":"degrees","belowZero":" below zero","celsius":"celsius","fahrenheit":"fahrenheit","ms":"meters per second","dayExpected":" during the day is expected to be","nightExpected":"and at night","inDay":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},"keyWords":{"weather":"weather","forecast":"forecast","louder":"louder","quieter":"quieter"}}')},124:function(e,t,n){n(125),e.exports=n(313)},312:function(e,t,n){},313:function(e,t,n){"use strict";n.r(t);n(311),n(312);var r={link:"https://rs.school/",title:"RS School 2020q1"},a={link:"https://github.com/alexeikravchuk",title:"Alexei Kravchuk"},o={link:"https://translate.yandex.net/api/v1.5/tr.json/translate",key:"trnsl.1.1.20200424T201938Z.3f0507346db250f1.23ad3b3e2cb7ad06e6a17ef51446f1f79c887410",getURL:function(e,t,n){return"".concat(o.link,"?key=").concat(o.key,"&lang=").concat(t,"-").concat(n,"&text=").concat(e)},errorsMessage:":( Error connecting to Yandex.Translate server."},i={link:"https://ipinfo.io/",key:"ad16fdc60242e8",getURL:function(){return"".concat(i.link,"json?token=").concat(i.key)},errorsMessage:"location error",defaultLocation:{city:"Minsk",country:"BY",placename:"Minsk, Belarus",lat:53.9,lng:27.5667,region:"Minsk City",timezone:"Europe/Minsk"}},c={link:"http://api.weatherbit.io/v2.0/",key:"930c65d014be422c86a75c9d8da988b0",getCurrentURL:function(e,t){return"".concat(c.link,"current?key=").concat(c.key,"&lat=").concat(e,"&lon=").concat(t)},getForecastURL:function(e,t){return"".concat(c.link,"forecast/daily?key=").concat(c.key,"&days=5&lat=").concat(e,"&lon=").concat(t)},errorsMessage:"weatherbit API error"},s={link:"https://api.opencagedata.com/geocode/v1/json",key:"a0f59014bffa44adb3323dc63d93386d",getReversURL:function(e,t,n){return"".concat(s.link,"?q=").concat(e,"+").concat(t,"&language=").concat(n.toLowerCase(),"&key=").concat(s.key)},getForvardURL:function(e,t){return"".concat(s.link,"?q=").concat(e,"&language=").concat(t.toLowerCase(),"&key=").concat(s.key)},errorsMessage:"geocoding API error"},u={link:"https://maps.googleapis.com/maps/api/js",key:"AIzaSyAZQNfThTyMWUMk8qTkRpJYiltXwKWgSdM",getURL:function(){return"".concat(u.link,"?key=").concat(u.key)}},l={link:"https://api.unsplash.com/photos/random",key:"24g4LJ5SmxeCy6gorJ9oi9y0d77YJ6fEHin7PZ4V9jo",getURL:function(e){return"".concat(l.link,"?client_id=").concat(l.key,"&query=").concat(e,"&orientation=landscape")},errorsMessage:"unsplash API error"},h="./img/background_default.jpg",d={en:"Search Error",be:"Памылка пошуку",ru:"Ошибка поиска"},p=n(121),f=n(122),v=n(123);function g(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}function y(e){for(var t,n=document.createElement(e),r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return(t=n.classList).add.apply(t,a),n}function w(){switch(localStorage.language){case"ru":return p;case"be":return f;default:return v}}function k(e){return b.apply(this,arguments)}function b(){return(b=m(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("N/A"!==t){e.next=2;break}return e.abrupt("return",h);case 2:return e.prev=2,e.next=5,fetch(t);case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("The network response was not ok.");case 8:return e.next=10,n.blob();case 10:return r=e.sent,e.abrupt("return",URL.createObjectURL(r));case 14:return e.prev=14,e.t0=e.catch(2),e.abrupt("return",h);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function x(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){x(o,r,a,i,c,"next",e)}function c(e){x(o,r,a,i,c,"throw",e)}i(void 0)}))}}function L(e){return M.apply(this,arguments)}function M(){return(M=S(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(l.getURL(t));case 3:if(200!==(n=e.sent).status){e.next=12;break}return e.next=7,n.json();case 7:return r=e.sent,e.next=10,r.urls.regular;case 10:return a=e.sent,e.abrupt("return",k(a));case 12:return e.abrupt("return",h);case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",h);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function R(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){R(o,r,a,i,c,"next",e)}function c(e){R(o,r,a,i,c,"throw",e)}i(void 0)}))}}function E(e){return P.apply(this,arguments)}function P(){return(P=T(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"en",r=s.getForvardURL(t,n),e.prev=2,e.next=5,fetch(r);case 5:if(200!==(a=e.sent).status){e.next=12;break}return e.next=9,a.json();case 9:return o=e.sent,i=o.results.find((function(e){return"by"===e.components.country_code})),e.abrupt("return",i||o.results[0]);case 12:throw Error();case 15:throw e.prev=15,e.t0=e.catch(2),Error(s.errorsMessage);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function C(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){C(o,r,a,i,c,"next",e)}function c(e){C(o,r,a,i,c,"throw",e)}i(void 0)}))}}function _(e,t,n){return A.apply(this,arguments)}function A(){return(A=j(regeneratorRuntime.mark((function e(t,n,r){var a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.getReversURL(t,n,r),e.prev=1,e.next=4,fetch(a);case 4:if(200!==(o=e.sent).status){e.next=10;break}return e.next=8,o.json();case 8:return i=e.sent,e.abrupt("return",i.results[0]);case 10:throw Error();case 13:throw e.prev=13,e.t0=e.catch(1),Error(s.errorsMessage);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function F(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){F(o,r,a,i,c,"next",e)}function c(e){F(o,r,a,i,c,"throw",e)}i(void 0)}))}}function q(e,t,n){return I.apply(this,arguments)}function I(){return(I=O(regeneratorRuntime.mark((function e(t,n,r){var a,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.getURL(t,n,r),e.prev=1,e.next=4,fetch(a,{headers:{"Access-Control-Allow-Origin":"*"}});case 4:return i=e.sent,e.next=7,i.json();case 7:if(200!==(c=e.sent).code){e.next=10;break}return e.abrupt("return",c.text);case 10:throw Error();case 13:throw e.prev=13,e.t0=e.catch(1),Error(o.errorsMessage);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function U(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){U(o,r,a,i,c,"next",e)}function c(e){U(o,r,a,i,c,"throw",e)}i(void 0)}))}}function V(){return W.apply(this,arguments)}function W(){return(W=H(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(i.getURL());case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",t.json());case 6:throw Error();case 9:throw e.prev=9,e.t0=e.catch(0),Error(i.errorsMessage);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function z(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){z(o,r,a,i,c,"next",e)}function c(e){z(o,r,a,i,c,"throw",e)}i(void 0)}))}}function N(e,t,n){return B.apply(this,arguments)}function B(){return(B=D(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1!==r){e.next=7;break}return e.next=4,fetch(c.getCurrentURL(t,n));case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,fetch(c.getForecastURL(t,n));case 9:a=e.sent;case 10:if(200!==a.status){e.next=12;break}return e.abrupt("return",a.json());case 12:throw Error();case 15:throw e.prev=15,e.t0=e.catch(0),Error(c.errorsMessage);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function J(e){try{var t=e.currentWeather.weather.description.split(" "),n="d"===e.currentWeather.pod?"day,daytime":"night,dark",r=function(e){switch(e){case 0:case 1:case 11:return"winter";case 2:case 3:case 4:return"spring";case 5:case 6:case 7:return"summer";default:return"autumn"}}(e.getLocationTime().getMonth()),a=e.location.placename.split(",")[0];return"".concat(t[t.length-1],",").concat(n,",").concat(r,",").concat(a)}catch(e){return"sky,nature"}}function Z(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.container=n,this.backgroundImg=null,this.buildApp()}var t,n,o,i,c;return t=e,(n=[{key:"buildApp",value:function(){this.container.insertAdjacentHTML("afterbegin",'\n      <div class="preloader">\n        <div class="preloader--row">\n          <div class="preloader--item"></div>\n          <div class="preloader--item"></div>\n        </div>\n      </div>\n      <div class="app-wrapper" id="app">\n        <div class="controll-wrapper" id="control"></div>\n        <div class="weather--location location"></div>\n        <div class="info--wrapper">\n          <div class="weather--wrapper" id="weather"></div>\n          <div class="geolocation-wrapper" id="geolocation"></div>\n        </div>\n        <span></span><span></span>\n        <footer class="footer">\n          <div class="footer-container">\n            <a href="'.concat(r.link,'" class="rss" target="blank">').concat(r.title,'</a>\n            <a href="').concat(a.link,'" class="github" target="blank">').concat(a.title,"</a>\n          </div>\n        </footer>\n      </div>\n    "))}},{key:"updateBackground",value:(i=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:return n=e.sent,this.container.style.backgroundImage="url(".concat(n,")"),e.abrupt("return",1);case 5:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function o(e){Z(a,n,r,o,c,"next",e)}function c(e){Z(a,n,r,o,c,"throw",e)}o(void 0)}))},function(e){return c.apply(this,arguments)})},{key:"showModal",value:function(){var e=y("div","modal--info");e.insertAdjacentHTML("afterbegin","".concat('\n <div class="modal--text">\n  <h1>Fancy Weather</h1>\n  <span>Voice commands to control:</span>\n  <ul>\n    <li>voice weather forecast: "weather", "forecast" ("погода", "прогноз")</li>\n    <li>volume increase: "louder" ("громче")</li>\n    <li>volume decrease: "quieter" ("тише")</li>\n  </ul>\n\n  <span>Additional functionality:</span>\n  <ul>\n    <li>a click on the map shows the weather at the specified location;</li>\n    <li>you can share the search results using the link with coordinates.</li>\n  </ul>\n\n  <code>Press Esc, Space, Enter or click OK to close the window</code>\n  <button class="close-btn">OK</button>\n</div>')),this.container.insertAdjacentElement("afterend",e),localStorage.notFirstTimeLoaded=!0,document.addEventListener("keydown",(function(e){13!==e.keyCode&&32!==e.keyCode&&255!==e.keyCode||document.querySelector(".modal--info").remove()})),document.addEventListener("click",(function(e){e.target.classList.contains("close-btn")&&document.querySelector(".modal--info").remove()}))}},{key:"hidePreloader",value:function(){var e=this;this.container.classList.add("loaded_hiding"),setTimeout((function(){e.container.classList.add("loaded"),e.container.classList.remove("loaded_hiding")}),700)}},{key:"showPreloader",value:function(){var e=this;this.container.classList.add("loaded_hiding"),setTimeout((function(){e.container.classList.remove("loaded"),e.container.classList.remove("loaded_hiding")}),700)}}])&&K(t.prototype,n),o&&K(t,o),e}();function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t}var t,n,r;return t=e,(n=[{key:"render",value:function(e){this.container=e.querySelector("#control");var t=y("div","control--options","options");t.insertAdjacentHTML("afterbegin",'<button class="options--refresh_btn">\n        <i class="material-icons">autorenew</i>\n      </button>\n      <div class="options--lang-dropdown_menu">\n        <button class="dropbtn lang" id="lang"></button>\n        <div class="dropdown-content">\n          <a class="lang" href="#"></a>\n          <a class="lang" href="#"></a>\n        </div>\n      </div>\n      <div class="options--temp-units">\n        <button class="options--temp-units '.concat("F"===localStorage.temperatureUnits?"active":"",'">°F</button>\n        <button class="options--temp-units ').concat("F"!==localStorage.temperatureUnits?"active":"",'">°C</button>\n      </div>\n      <button class="options--play_btn">\n        <i class="material-icons voice-notification">play_circle_outline</i>\n      </button>\n    '));var n=y("div","control--search","search");n.insertAdjacentHTML("afterbegin",'<form class="search--form">\n      <input class="search--input" type="search" required placeholder="Search city or ZIP"></input>\n      <span class="material-icons recognition">record_voice_over</span>\n      <button class="search-btn">SEARCH</button>\n    </form>'),this.container.insertAdjacentElement("afterbegin",t),this.container.insertAdjacentElement("beforeend",n),this.searchInput=n.querySelector(".search--input"),this.setTranslation()}},{key:"setTranslation",value:function(){var e=w();this.container.querySelectorAll(".lang").forEach((function(t,n){t.innerText=e.lang[n]})),this.searchInput.placeholder=e.placeholder,this.container.querySelector(".search-btn").textContent=e.search}},{key:"clearInput",value:function(){this.searchInput.classList.remove("error"),this.searchInput.value=""}},{key:"showErrorMessage",value:function(){this.searchInput.classList.add("error"),this.searchInput.value=d[localStorage.language]}},{key:"toggleButton",value:function(e,t){var n="speech"===t?".recognition":".voice-notification",r=this.container.querySelector(n);return e?r.classList.add("active"):r.classList.remove("active")}},{key:"submitFormWitchValue",value:function(e){this.searchInput.value=e,this.container.querySelector(".search-btn").click()}},{key:"inputValue",get:function(){return this.searchInput.value}}])&&G(t.prototype,n),r&&G(t,r),e}();function X(e,t){if("F"===t)return Math.round(9*Math.round(e)/5+32);if("C"===t)return Math.round(5*(Math.round(e)-32)/9);throw Error("Invalid value of units")}function $(e){var t="./img/weather_icons/";switch(e){case"t01d":case"t01n":case"t02d":case"t02n":case"t03d":case"t03n":case"t04d":case"t04n":return"".concat(t,"thunderstorms.svg");case"t05d":case"t05n":return"".concat(t,"hail.svg");case"d01d":return"".concat(t,"partly-cloudy-day-drizzle.svg");case"d01n":return"".concat(t,"partly-cloudy-night-drizzle.svg");case"d02d":case"d02n":case"d03d":case"d03n":return"".concat(t,"drizzle.svg");case"r01d":case"r01n":case"r02d":case"r02n":case"r03d":case"r03n":case"r04d":case"r04n":case"r06d":case"r06n":case"f01d":case"f01n":return"".concat(t,"rain.svg");case"r05d":return"".concat(t,"partly-cloudy-day-rain.svg");case"r05n":return"".concat(t,"partly-cloudy-night-rain.svg");case"c01d":return"".concat(t,"clear-day.svg");case"c01n":return"".concat(t,"clear-night.svg");case"c02d":case"c03d":return"".concat(t,"partly-cloudy-day.svg");case"c02n":case"c03n":return"".concat(t,"partly-cloudy-night.svg");case"c04d":case"c04n":return"".concat(t,"cloudy.svg");case"s01d":return"".concat(t,"partly-cloudy-day-hail.svg");case"s01n":return"".concat(t,"partly-cloudy-day-snow.svg");case"s02d":case"s02n":case"s03d":case"s03n":case"s05d":case"s05n":case"s06d":case"s06n":return"".concat(t,"snow.svg");case"s04d":return"".concat(t,"partly-cloudy-day-snow.svg");case"s04n":return"".concat(t,"partly-cloudy-night-hail.svg");case"a01d":case"a01n":case"a02d":case"a02n":case"a03d":case"a03n":case"a04d":case"a04n":case"a05d":case"a05n":case"a06d":case"a06n":return"".concat(t,"tornado.svg");default:return null}}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var te=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.view=new Q(this),this.isRecognitionActive=!1}var t,n,r;return t=e,(n=[{key:"render",value:function(){this.view.render(this.container)}},{key:"changeLanguage",value:function(){this.view.setTranslation(),this.recognition&&(this.recognition.lang=document.documentElement.lang)}},{key:"setVoiceNotification",value:function(e){var t=this,n=e.placename,r=e.currentWeather,a=e.forecast;return window.speechSynthesis.getVoices(),this.msg=new SpeechSynthesisUtterance,this.msg.text=function(e,t,n){var r=w(),a=r.speech,o=localStorage.temperatureUnits,i=t.temp,c=t.app_temp,s=t.wind_spd,u=t.rh,l=t.weather,h=n[0],d=h.max_temp,p=h.low_temp;i="F"===o?X(i,"F"):i,c="F"===o?X(c,"F"):c,d="F"===o?X(d,"F"):d,p="F"===o?X(p,"F"):p;var f=localStorage.language,v=e.split(", ")[0];"ru"!==f&&"be"!==f||(v=function(e){var t=e.substr(-1);switch(e.substr(-2)){case"чи":case"ки":case"щи":return"".concat(e.slice(0,-1),"ах");case"ая":return"".concat(e.slice(0,-2),"ой");case"ое":return"".concat(e.slice(0,-1),"м");case"ец":return"".concat(e.slice(0,-2),"це");case"ый":return"".concat(e.slice(0,-2),"ом")}switch(t){case"о":case"e":case"и":return e;case"ь":case"а":return"".concat(e.slice(0,-1),"е");case"ы":return"".concat(e.slice(0,-1),"ах");default:return"".concat(e,"е")}}(v));for(var g="".concat(a.in," ").concat(v," ").concat(a.now," ").concat(Math.round(i),"°\n    ").concat(Math.round(i)<0?a.belowZero:""," ").concat("F"===o?a.fahrenheit:a.celsius,".\n    ").concat(r.wether[l.code],", ").concat(r.feel," ").concat(Math.round(c),"°,\n    ").concat(r.wind," ").concat(Math.round(s)," ").concat(a.ms,",\n    ").concat(r.humidity," ").concat(Math.round(u),"%.\n    ").concat(a.dayExpected," ").concat(Math.round(d),"°, ").concat(a.nightExpected," ").concat(Math.round(p),"°. "),m=1;m<=3;m+=1){var y=n[m].datetime,k=n[m],b=k.max_temp,x=k.low_temp;b="F"===o?X(b,"F"):b,x="F"===o?X(x,"F"):x;var S=new Date(y).getDay();g+="".concat(a.on," ").concat(a.inDay[S]," ").concat(a.dayExpected," ").concat(Math.round(b),"°,\n    ").concat(a.nightExpected," ").concat(Math.round(x),"°. ")}return g.split("\n").join(" ").split("  ").join("")}(n,r,a),this.msg.onend=function(){return t.toggleVoiceButton(!1)},this.setVoice()}},{key:"setVoice",value:function(){var e=localStorage.language;"en"===e&&(e="en-US");var t=speechSynthesis.getVoices().filter((function(t){return t.lang.includes(e)}));this.msg.voice=t[t.length-1]}},{key:"clearInput",value:function(){this.view.clearInput()}},{key:"showErrorMessage",value:function(e){var t=this;this.view.showErrorMessage(e),setTimeout((function(){t.view.clearInput()}),4e3)}},{key:"toggleSpeechRecognition",value:function(){return this.isRecognitionActive?(this.view.toggleButton(!1,"speech"),this.isRecognitionActive=!1,this.recognition.abort()):(this.view.toggleButton(!0,"speech"),this.startRecognizeSpeech())}},{key:"toggleVoiceButton",value:function(e){this.view.toggleButton(e,"voice")}},{key:"startRecognizeSpeech",value:function(){var e=this,t=new(window.SpeechRecognition||window.webkitSpeechRecognition);this.recognition=t,t.lang=document.documentElement.lang,t.interimResults=!0,t.maxAlternatives=1,t.addEventListener("result",(function(t){var n=Array.from(t.results[0]).map((function(e){return e.transcript}));t.results[0].isFinal&&e.сheckSpeechResult(n[0])})),t.addEventListener("end",(function(){return e.isRecognitionActive?t.start():t.stop()})),this.isRecognitionActive=!0,t.start()}},{key:"сheckSpeechResult",value:function(e){var t=w().keyWords;return e.includes(t.weather)||e.includes(t.forecast)?document.querySelector(".voice-notification").click():e.includes(t.louder)?(this.msg.volume<=.8&&(this.msg.volume+=.2),1):e.includes(t.quieter)?(this.msg.volume>=.2&&(this.msg.volume-=.2),1):this.searchCity(e)}},{key:"searchCity",value:function(e){this.view.submitFormWitchValue(e)}},{key:"inputValue",get:function(){return this.view.inputValue}},{key:"msgVoice",get:function(){return this.msg.voice}}])&&ee(t.prototype,n),r&&ee(t,r),e}();function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var re=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t}var t,n,r;return t=e,(n=[{key:"render",value:function(e){var t=e.querySelector("#weather");t.innerHTML="",this.container=e;var n=this.container.querySelector(".location");n.innerHTML="",n.insertAdjacentHTML("afterbegin",'<div class="location--placename"></div>\n    <div class="location--timeblock">\n      <div class="location--timeblock-date date">\n        <span class="date--day-short"></span>\n        <span class="date--date"></span>\n        <span class="date--month"></span>\n      </div>\n      <div class="location--timeblock-time time"></div>\n    </div>'),t.insertAdjacentHTML("afterbegin",'<div class="weather--current">\n      <div class="temperature--block">\n        <div class="weather--current-temperature temp"></div>\n        <div class="weather--current-forecast"></div>\n      </div>\n      <div class="weather--current-details">\n        <div class="weather--current-details_icon"></div>\n        <div class="weather--current-details_desc"></div>\n      </div>\n    </div>\n    <div class="weather--forecast"></div>')}},{key:"updateView",value:function(e,t){var n=e.placename;this.container.querySelector(".location--placename").textContent=n,this.showDate(t),this.showTime(t),this.showCurrentWeather(),this.showForecast(),"F"===localStorage.temperatureUnits&&this.toggleUnits()}},{key:"showDate",value:function(e){var t=w(),n=t.dayShort[e.getDay()],r=t.month[e.getMonth()];this.container.querySelector(".date--day-short").textContent=n,this.container.querySelector(".date--date").textContent=e.getDate(),this.container.querySelector(".date--month").textContent=r}},{key:"showTime",value:function(e){var t=e.getHours();t=(t<10?"0":"")+t;var n=e.getMinutes();n=(n<10?"0":"")+n;var r=e.getSeconds();r=(r<10?"0":"")+r;var a="".concat(t,":").concat(n,":").concat(r);this.container.querySelector(".time").textContent=a}},{key:"showCurrentWeather",value:function(){var e=this.model.currentWeather,t=e.temp,n=e.app_temp,r=e.wind_spd,a=e.rh,o=e.weather,i=this.model.forecast.data[0],c=i.max_temp,s=i.low_temp,u=$(o.icon),l=w();this.container.querySelector(".weather--current-temperature").textContent="".concat(Math.round(t),"°"),this.container.querySelector(".weather--current-forecast").innerHTML="",this.container.querySelector(".weather--current-forecast").insertAdjacentHTML("afterbegin",'\n      <span class="temperature-day temp">'.concat(Math.round(c),'°</span>\n      <span class="temperature-night temp">').concat(Math.round(s),"°</span>\n    ")),this.container.querySelector(".weather--current-details_icon").style.backgroundImage="url(".concat(u,")"),this.container.querySelector(".weather--current-details_desc").innerHTML="",this.container.querySelector(".weather--current-details_desc").insertAdjacentHTML("afterbegin","\n      <p>".concat(l.wether[o.code],"</p>\n      <p>").concat(l.feel,' <span class="temp">').concat(Math.round(n),"°</span></p>\n      <p>").concat(l.wind," ").concat(Math.round(r)," ").concat(l.ms,"</p>\n      <p>").concat(l.humidity," ").concat(Math.round(a),"%</p>\n    "))}},{key:"showForecast",value:function(){var e=this.container.querySelector(".weather--forecast");e.innerHTML="";var t=w(),n=this.model.getLocationTime().getDay(),r=0;this.model.forecast.data.forEach((function(a){var o=new Date(a.datetime).getDay();if(o===n||(o+7)%7===n||3===r)return 0;var i=$(a.weather.icon),c=y("div","weather--forecast-next_day","next_day");return c.insertAdjacentHTML("afterbegin",'<div class="weather--forecast-day_name next_day-name">'.concat(t.day[o],'</div>\n        <div class="weather--forecast-details next_day-details">\n          <div class="wether--forecast-temperature next_day-temperature">\n            <span class="temperature-day temp">').concat(Math.round(a.max_temp),'°</span>\n            <span class="temperature-night temp">').concat(Math.round(a.low_temp),'°</span>\n          </div>\n          <div class="weather--forecast-icon next_day-icon" style="background-image: url(').concat(i,')"></div>\n        </div>')),r+=1,e.insertAdjacentElement("beforeend",c)}))}},{key:"toggleUnits",value:function(){var e=localStorage.temperatureUnits;this.container.querySelectorAll(".temp").forEach((function(t){var n=parseFloat(t.textContent);t.textContent="".concat(X(n,e),"°")}))}}])&&ne(t.prototype,n),r&&ne(t,r),e}();function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ie(o,r,a,i,c,"next",e)}function c(e){ie(o,r,a,i,c,"throw",e)}i(void 0)}))}}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.view=new re(this),this.location=null,this.currentWeather=null,this.forecast=null}var t,n,r,a,o,i;return t=e,(n=[{key:"init",value:(i=ce(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.location=t,e.next=3,this.setWeatherInfo();case 3:return e.abrupt("return",1);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"setWeatherInfo",value:(o=ce(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.location,n=t.lat,r=t.lng,e.prev=1,e.next=4,Promise.all([N(n,r,1),N(n,r,3)]);case 4:a=e.sent,o=ae(a,2),i=o[0],c=o[1],s=ae(i.data,1),this.currentWeather=s[0],this.forecast=c,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),Error("error receiving weather information");case 16:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return o.apply(this,arguments)})},{key:"getLocationTime",value:function(){var e=new Date;this.location.timeOffsetSec=this.location.timeOffsetSec||60*-e.getTimezoneOffset();var t=+e+6e4*e.getTimezoneOffset()+1e3*this.location.timeOffsetSec;return new Date(t)}},{key:"render",value:function(){this.view.render(this.container),this.view.updateView(this.location,this.getLocationTime()),this.runTime()}},{key:"runTime",value:function(){var e=this;this.timer=setInterval((function(){e.view.showTime(e.getLocationTime())}),1e3)}},{key:"changeLanguage",value:(a=ce(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.previousLanguage,n=localStorage.language,e.next=4,q(this.location.placename.split(", "),t,n);case 4:this.location.placename=e.sent,this.location.placename=this.location.placename[0].split(",").join(", "),this.view.updateView(this.location,this.getLocationTime());case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"changeTempUnits",value:function(){this.view.toggleUnits()}},{key:"weatherInfo",get:function(){return{placename:this.location.placename,currentWeather:this.currentWeather,forecast:this.forecast.data}}},{key:"currentWeatherDescription",get:function(){return this.currentWeather[0].weather.description}}])&&se(t.prototype,n),r&&se(t,r),e}();function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var he=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t}var t,n,r;return t=e,(n=[{key:"render",value:function(e){this.container=e.querySelector("#geolocation"),this.container.innerHTML="",this.container.insertAdjacentHTML("afterbegin",'\n      <div class="geolocation--map"></div>\n      <div class="geolocation--coordinats">\n        <span class="lat"></span><br>\n        <span class="lng"></span>\n      </div>'),this.showСoordinates()}},{key:"showСoordinates",value:function(){var e=w(),t=e.lat,n=e.lng,r=this.model.location,a=r.lat,o=r.lng,i=Math.round(Math.abs(a)%1*60),c=Math.round(Math.abs(o)%1*60);a="".concat(t,": ").concat(Math.floor(a),"°").concat(i<10?"0":"").concat(i,"'"),o="".concat(n,": ").concat(Math.floor(o),"°").concat(c<10?"0":"").concat(c,"'"),document.querySelector(".lat").textContent=a,document.querySelector(".lng").textContent=o}}])&&le(t.prototype,n),r&&le(t,r),e}();function de(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){de(o,r,a,i,c,"next",e)}function c(e){de(o,r,a,i,c,"throw",e)}i(void 0)}))}}function fe(){return ve.apply(this,arguments)}function ve(){return(ve=pe(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!sessionStorage.navigatorLocation){e.next=4;break}return t=JSON.parse(sessionStorage.navigatorLocation),localStorage.removeItem("navigatorLocation"),e.abrupt("return",t);case 4:return e.next=6,V();case 6:return t=e.sent,n=t.loc,t.lat=+n.split(",")[0],t.lng=+n.split(",")[1],e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ge(o,r,a,i,c,"next",e)}function c(e){ge(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ye(e){return we.apply(this,arguments)}function we(){return(we=me(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,c,s,u,l,h,d,p,f,v,g,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,e.prev=1,n.placename){e.next=11;break}return a=localStorage.language||"en",localStorage.language=a,o=t.lat,i=t.lng,e.next=8,_(o,i,a);case 8:r=e.sent,e.next=13;break;case 11:n.lat=t.geometry.lat,n.lng=t.geometry.lng;case 13:return c=r.components,s=c.town,u=c.city,l=c.village,h=c.hamlet,d=c.suburb,p=c.county,f=c.state,v=c.country,g=c.continent,m=s||l||h||u||d||p||f,n.timeOffsetSec=r.annotations.timezone.offset_sec,n.placename=m?"".concat(m,", ").concat(v||g):r.formatted,e.abrupt("return",n);case 20:throw e.prev=20,e.t0=e.catch(1),Error(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function ke(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ke(o,r,a,i,c,"next",e)}function c(e){ke(o,r,a,i,c,"throw",e)}i(void 0)}))}}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Se=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=new he(this),this.container=t,this.location=null}var t,n,r,a,o;return t=e,(n=[{key:"init",value:(o=be(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe();case 3:return t=e.sent,e.next=6,this.setLocation(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.location=i.defaultLocation;case 11:return e.abrupt("return",1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return o.apply(this,arguments)})},{key:"setLocation",value:(a=be(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:this.location=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"render",value:function(){this.view.render(this.container),this.initMap()}},{key:"initMap",value:function(){var e=this,t=this.container.querySelector(".geolocation--map"),n=window.google.maps,r=n.Map,a=n.Marker,o=this.location,i={lat:o.lat,lng:o.lng},c=new r(t,{center:i,zoom:11,zoomControl:!0,zoomControlOptions:{position:window.google.maps.ControlPosition.RIGHT_CENTER},mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1});c.addListener("click",(function(t){e.mapMarker.setMap(null),e.mapMarker=new a({position:t.latLng,map:c}),window.location.hash="lat=".concat(t.latLng.lat(),"&lng=").concat(t.latLng.lng()),c.panTo(t.latLng)})),this.map=c,this.mapMarker=new a({position:i,map:c})}},{key:"changeMapCenter",value:function(){var e=this.location,t=e.lat,n=e.lng;this.map.setCenter({lat:t,lng:n}),this.mapMarker.setMap(null),this.mapMarker=new window.google.maps.Marker({position:{lat:t,lng:n},map:this.map}),this.view.showСoordinates()}},{key:"changeLanguage",value:function(){this.view.showСoordinates()}}])&&xe(t.prototype,n),r&&xe(t,r),e}();function Le(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function Me(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Le(o,r,a,i,c,"next",e)}function c(e){Le(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Te=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.view=new Y(this,t),this.control=new te(t),this.weather=new ue(t),this.geolocation=new Se(t)}var t,n,r,a,o,i;return t=e,(n=[{key:"init",value:(i=Me(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.language&&(document.documentElement.lang=localStorage.language),e.next=3,this.geolocation.init();case 3:return e.next=5,this.weather.init(this.geolocation.location);case 5:return this.control.setVoiceNotification(this.weather.weatherInfo),this.control.render(),this.weather.render(),this.geolocation.render(),e.next=11,this.updateBackground();case 11:return e.abrupt("return",this.view.hidePreloader());case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"updateBackground",value:(o=Me(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=J(this.weather),e.next=3,this.view.updateBackground(t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"changeLanguage",value:function(e){localStorage.previousLanguage=localStorage.language,localStorage.language=e,document.documentElement.lang=e,this.control.changeLanguage(),this.weather.changeLanguage(),this.geolocation.changeLanguage(),this.control.setVoiceNotification(this.weather.weatherInfo)}},{key:"changeTempUnits",value:function(){this.weather.changeTempUnits(),this.control.setVoiceNotification(this.weather.weatherInfo)}},{key:"findPlace",value:(a=Me(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.view.showPreloader(),e.next=4,this.geolocation.setLocation(t);case 4:return e.next=6,this.weather.init(this.geolocation.location);case 6:return this.control.clearInput(),this.weather.render(),this.geolocation.changeMapCenter(),e.next=11,this.updateBackground();case 11:this.control.setVoiceNotification(this.weather.weatherInfo),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this.control.showErrorMessage(e.t0.message);case 17:return e.abrupt("return",this.view.hidePreloader());case 18:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return a.apply(this,arguments)})},{key:"toggleSpeechRecognition",value:function(){this.control.toggleSpeechRecognition()}},{key:"toggleVoiceNotification",value:function(){return speechSynthesis.speaking?(speechSynthesis.pause(),this.control.toggleVoiceButton(!1),speechSynthesis.cancel()):this.runVoiceNotificaion()}},{key:"runVoiceNotificaion",value:function(){this.control.msgVoice||this.control.setVoice(),this.control.toggleVoiceButton(!0);var e=setInterval((function(){return speechSynthesis.speaking?speechSynthesis.resume():clearInterval(e)}),1e4);return speechSynthesis.speak(this.control.msg)}},{key:"showModal",value:function(){this.view.showModal()}},{key:"searchInputValue",get:function(){return this.control.inputValue}}])&&Re(t.prototype,n),r&&Re(t,r),e}();function Ee(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.model=new Te(t)}var t,n,r,a,o;return t=e,(n=[{key:"start",value:function(){var e,t=((e=y("script")).src=u.getURL(),e.defer=!0,e.async=!0,e);return document.body.insertAdjacentElement("beforeend",t),this.setListeners(),window.location.hash.includes("lat=")&&window.location.hash.includes("&lng=")?this.initWithHashCoordinates():this.initWithNavigatorCoordinates()}},{key:"initWithHashCoordinates",value:function(){var e=window.location.hash,t={lat:parseFloat(e.split("lat=")[1]),lng:parseFloat(e.split("lng=")[1])};sessionStorage.navigatorLocation=JSON.stringify(t),this.model.init()}},{key:"initWithNavigatorCoordinates",value:function(){var e=this;try{navigator.geolocation.getCurrentPosition((function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};sessionStorage.navigatorLocation=JSON.stringify(n),e.model.init(e.control,e.weather,e.geolocation)}),(function(){return e.model.init()}))}catch(e){this.model.init()}}},{key:"setListeners",value:function(){var e=this;document.addEventListener("click",(function(t){return e.determineTarget(t)})),window.onhashchange=function(t){return e.checkHash(t)},localStorage.notFirstTimeLoaded||this.model.showModal()}},{key:"determineTarget",value:function(e){if(e.target.classList.contains("options--refresh_btn")||e.target.parentElement.classList.contains("options--refresh_btn"))return this.model.updateBackground();if(e.target.classList.contains("lang"))return this.model.changeLanguage(e.target.textContent);if(e.target.classList.contains("options--temp-units")&&!e.target.classList.contains("active"))return document.querySelectorAll(".options--temp-units").forEach((function(e){e.classList.remove("active")})),e.target.classList.add("active"),localStorage.temperatureUnits=e.target.textContent.slice(1),this.model.changeTempUnits();if(e.target.classList.contains("search-btn")){e.preventDefault();var t=this.model.searchInputValue;return window.location.hash="",t&&this.changeLocationHash(t)}return e.target.classList.contains("recognition")?this.model.toggleSpeechRecognition():e.target.classList.contains("voice-notification")?this.model.toggleVoiceNotification():0}},{key:"checkHash",value:function(){var e=window.location.hash;if(e.includes("lat")&&e.includes("lng")){var t={lat:parseFloat(e.split("lat=")[1]),lng:parseFloat(e.split("lng=")[1])};this.model.findPlace(t)}}},{key:"changeLocationHash",value:(a=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(t);case 3:n=e.sent,window.location.hash="lat=".concat(n.geometry.lat,"&lng=").concat(n.geometry.lng),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.model.control.showErrorMessage(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})),o=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){Ee(o,n,r,i,c,"next",e)}function c(e){Ee(o,n,r,i,c,"throw",e)}i(void 0)}))},function(e){return o.apply(this,arguments)})}])&&Pe(t.prototype,n),r&&Pe(t,r),e}();window.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("app-container");new Ce(e).start()}))}});