!function(t){function e(e){for(var r,i,c=e[0],s=e[1],u=e[2],h=0,d=[];h<c.length;h++)i=c[h],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(l&&l(e);d.length;)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={0:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;o.push([124,1]),n()}({121:function(t){t.exports=JSON.parse('{"lang":["ru","en","be"],"placeholder":"Искать город","search":"искать","feel":"Ощущается как:","wind":"Ветер:","ms":"м/с","humidity":"Влажность:","day":["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],"dayShort":["Вск","Пнд","Втр","Срд","Чтв","Птн","Сбт"],"month":["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],"lat":"Широта","lng":"Долгота","wether":{"200":"Гроза с небольшим дождем","201":"Гроза с дождем","202":"Гроза с проливным дождем","231":"Гроза с моросящим дождем","232":"Гроза с сильным моросящим дождем","233":"Гроза с градом","300":"Легкая морось","301":"Морось","302":"Сильный дождь","500":"Легкий дождь","501":"Умеренный дождь","502":"Сильный дождь","511":"Дождь со снегом","520":"Слабый дождь","521":"Ливень","522":"Сильный ливень","600":"Легкий снег","601":"Снег","602":"Сильный снегопад","610":"Смешать снег / дождь","611":"Мокрый снег","612":"Тяжелый мокрый снег","621":"Снегопад","622":"Сильный снегопад","623":"Снегопад","700":"Мгла","711":"Дым","721":"Туман","731":"Песок / пыль","741":"Туман","751":"Морозный туман","800":"Безоблачно","801":"Слабая облачность","802":"Переменная облачность","803":"Облачно с прояснениями","804":"Пасмурно","900":"Неизвестные осадки"},"error":"Нет такого места","speech":{"in":"В","on":"В","now":"сейчас","degrees":"градусов","belowZero":"ниже нуля","celsius":"по цельсию","fahrenheit":"по фаренгейту","ms":"метров в секунду","dayExpected":"днём ожидается до","nightExpected":"ночью до"},"keyWords":{"weather":"прогноз","forecast":"погода","louder":"громче","quieter":"тише"}}')},122:function(t){t.exports=JSON.parse('{"lang":["be","en","ru"],"placeholder":"Шукаць горад","search":"знайсці","feel":"Адчуваецца як:","wind":"Вецер:","ms":"м/с","humidity":"Вільготнасць:","day":["Нядзеля","Панядзелак","Аўторак","Серада","Чацверг","Пятнiца","Субота"],"dayShort":["Няд","Пнд","Аўт","Сер","Чцв","Пят","Суб"],"month":["Студзеня","Лютага","Сакавіка","Красавіка","Мая","Чэрвеня","Ліпеня","Аўгуста","Верасеня","Кастрычніка","Лістапада","Снежаня"],"lat":"Шырата","lng":"Даўгата","wether":{"200":"Навальніца з невялікім дажджом","201":"Навальніца з дажджом","202":"Навальніца з праліўным дажджам","231":"Навальніца з маросячым даждем","232":"Навальніца з сільным маросячым дождем","233":"Навальніца з градом","300":"Легкая марось","301":"Марось","302":"Сильный дождж","500":"Легкі дождж","501":"Умеренный дождж","502":"Сильный дождж","511":"Дождж со снегом","520":"Слабый дождж","521":"Лівень","522":"Сильный ливень","600":"Легкі снег","601":"Снег","602":"Сільны снегапад","610":"Смешаны снег / дождж","611":"Мокрый снег","612":"Цяжкі мокры снег","621":"Снегапад","622":"Сільны снегапад","623":"Снегапад","700":"Імгла","711":"Дым","721":"Туман","731":"Песок / пыль","741":"Туман","751":"Морозный туман","800":"Бясхмарна","801":"Слабая воблачнасць","802":"Пераменная воблачнасць","803":"Пагодна","804":"Пахмурна","900":"Невядомыя ападкі"},"error":"Няма такога месца","speech":{"in":"У","on":"У","now":"зараз","degrees":"градусов","belowZero":"нижэй за нуль","celsius":"по цельсию","fahrenheit":"по фаренхгейту","ms":"метрау у сякунду","dayExpected":"у день чакаецца да","nightExpected":"нОччу да"},"keyWords":{"weather":"прагноз","forecast":"надвор","louder":"гучней","quieter":"цішэй"}}')},123:function(t){t.exports=JSON.parse('{"lang":["en","ru","be"],"placeholder":"Search city","search":"search","feel":"Feels like:","wind":"Wind:","ms":"m/s","humidity":"Humidity:","day":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"month":["January","February","March","April","May","June","July","August","September","October","November","December"],"lat":"Latitude","lng":"Longitude","wether":{"200":"Thunderstorm with light rain","201":"Thunderstorm with rain","202":"Thunderstorm with heavy rain","231":"Thunderstorm with drizzle","232":"Thunderstorm with heavy drizzle","233":"Thunderstorm with Hail","300":"Light Drizzle","301":"Drizzle","302":"Heavy Drizzle","500":"Light Rain","501":"Moderate Rain","502":"Heavy Rain","511":"Freezing rain","520":"Light shower rain","521":"Shower rain","522":"Heavy shower rain","600":"Light snow","601":"Snow","602":"Heavy Snow","610":"Mix snow/rain","611":"Sleet","612":"Heavy sleet","621":"Snow shower","622":"Heavy snow shower","623":"Flurries","700":"Mist","711":"Smoke","721":"Haze","731":"Sand/dust","741":"Fog","751":"Freezing Fog","800":"Clear sky","801":"Few clouds","802":"Scattered clouds","803":"Broken clouds","804":"Overcast clouds","900":"Unknown Precipitation"},"error":"There is no such place","speech":{"in":"In","on":"On","now":"now","degrees":"degrees","belowZero":" below zero","celsius":"celsius","fahrenheit":"fahrenheit","ms":"meters per second","dayExpected":" during the day is expected to be","nightExpected":"and at night"},"keyWords":{"weather":"weather","forecast":"forecast","louder":"louder","quieter":"quieter"}}')},124:function(t,e,n){n(125),t.exports=n(313)},312:function(t,e,n){},313:function(t,e,n){"use strict";n.r(e);n(311),n(312);var r={link:"https://rs.school/",title:"RS School 2020q1"},a={link:"https://github.com/alexeikravchuk",title:"Alexei Kravchuk"},o={link:"https://translate.yandex.net/api/v1.5/tr.json/translate",key:"key=trnsl.1.1.20200424T201938Z.3f0507346db250f1.23ad3b3e2cb7ad06e6a17ef51446f1f79c887410",getURL:function(t,e,n){return"".concat(o.link,"?").concat(o.key,"&lang=").concat(e,"-").concat(n,"&text=").concat(t)},errorsMessage:":( Error connecting to Yandex.Translate server."},i={link:"https://ipinfo.io/",key:"ad16fdc60242e8",getURL:function(){return"".concat(i.link,"json?token=").concat(i.key)},errorsMessage:"location error",defaultLocation:{city:"Minsk",country:"BY",placename:"Minsk, Belarus",lat:53.9,lng:27.5667,region:"Minsk City",timezone:"Europe/Minsk"}},c={link:"http://api.weatherbit.io/v2.0/",key:"930c65d014be422c86a75c9d8da988b0",getCurrentURL:function(t,e){return"".concat(c.link,"current?key=").concat(c.key,"&lat=").concat(t,"&lon=").concat(e)},getForecastURL:function(t,e){return"".concat(c.link,"forecast/daily?key=").concat(c.key,"&days=5&lat=").concat(t,"&lon=").concat(e)},errorsMessage:"weatherbit API error"},s={link:"https://api.opencagedata.com/geocode/v1/json",key:"a0f59014bffa44adb3323dc63d93386d",getReversURL:function(t,e,n){return"".concat(s.link,"?q=").concat(t,"+").concat(e,"&language=").concat(n.toLowerCase(),"&key=").concat(s.key)},getForvardURL:function(t,e){return"".concat(s.link,"?q=").concat(t,"&language=").concat(e.toLowerCase(),"&key=").concat(s.key)},errorsMessage:"geocoding API error"},u={link:"https://maps.googleapis.com/maps/api/js",key:"AIzaSyAmzHuqrRTvdpy-KBfl4A8SR72nibz6aXU",getURL:function(){return"".concat(u.link,"?key=").concat(u.key)}},l={link:"https://api.unsplash.com/photos/random",key:"24g4LJ5SmxeCy6gorJ9oi9y0d77YJ6fEHin7PZ4V9jo",getURL:function(t){return"".concat(l.link,"?client_id=").concat(l.key,"&query=").concat(t,"&orientation=landscape")},errorsMessage:"unsplash API error"},h="./img/background_default.jpg",d="day,daytime",p="night,dark",f={en:"Search Error",be:"Памылка пошуку",ru:"Ошибка поиска"},v=n(121),g=n(122),m=n(123);function y(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){y(o,r,a,i,c,"next",t)}function c(t){y(o,r,a,i,c,"throw",t)}i(void 0)}))}}function b(t){for(var e,n=document.createElement(t),r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return(e=n.classList).add.apply(e,a),n}function k(){switch(localStorage.language){case"ru":return v;case"be":return g;default:return m}}function x(t){switch(t){case 0:case 1:case 11:return"winter";case 2:case 3:case 4:return"spring";case 5:case 6:case 7:return"summer";default:return"autumn"}}function S(t){var e="./img/weather_icons/";switch(t){case"t01d":case"t01n":case"t02d":case"t02n":case"t03d":case"t03n":case"t04d":case"t04n":return"".concat(e,"thunderstorms.svg");case"t05d":case"t05n":return"".concat(e,"hail.svg");case"d01d":return"".concat(e,"partly-cloudy-day-drizzle.svg");case"d01n":return"".concat(e,"partly-cloudy-night-drizzle.svg");case"d02d":case"d02n":case"d03d":case"d03n":return"".concat(e,"drizzle.svg");case"r01d":case"r01n":case"r02d":case"r02n":case"r03d":case"r03n":case"r04d":case"r04n":case"r06d":case"r06n":case"f01d":case"f01n":return"".concat(e,"rain.svg");case"r05d":return"".concat(e,"partly-cloudy-day-rain.svg");case"r05n":return"".concat(e,"partly-cloudy-night-rain.svg");case"c01d":return"".concat(e,"clear-day.svg");case"c01n":return"".concat(e,"clear-night.svg");case"c02d":case"c03d":return"".concat(e,"partly-cloudy-day.svg");case"c02n":case"c03n":return"".concat(e,"partly-cloudy-night.svg");case"c04d":case"c04n":return"".concat(e,"cloudy.svg");case"s01d":return"".concat(e,"partly-cloudy-day-hail.svg");case"s01n":return"".concat(e,"partly-cloudy-day-snow.svg");case"s02d":case"s02n":case"s03d":case"s03n":case"s05d":case"s05n":case"s06d":case"s06n":return"".concat(e,"snow.svg");case"s04d":return"".concat(e,"partly-cloudy-day-snow.svg");case"s04n":return"".concat(e,"partly-cloudy-night-hail.svg");case"a01d":case"a01n":case"a02d":case"a02n":case"a03d":case"a03n":case"a04d":case"a04n":case"a05d":case"a05n":case"a06d":case"a06n":return"".concat(e,"tornado.svg");default:return null}}function L(t){return M.apply(this,arguments)}function M(){return(M=w(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("N/A"!==e){t.next=2;break}return t.abrupt("return",h);case 2:return t.prev=2,t.next=5,fetch(e);case 5:if((n=t.sent).ok){t.next=8;break}throw new Error("The network response was not ok.");case 8:return t.next=10,n.blob();case 10:return r=t.sent,t.abrupt("return",URL.createObjectURL(r));case 14:return t.prev=14,t.t0=t.catch(2),t.abrupt("return",h);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})))).apply(this,arguments)}function R(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function T(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){R(o,r,a,i,c,"next",t)}function c(t){R(o,r,a,i,c,"throw",t)}i(void 0)}))}}function E(t){return C.apply(this,arguments)}function C(){return(C=T(regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(l.getURL(e));case 3:if(200!==(n=t.sent).status){t.next=12;break}return t.next=7,n.json();case 7:return r=t.sent,t.next=10,r.urls.regular;case 10:return a=t.sent,t.abrupt("return",L(a));case 12:return t.abrupt("return",h);case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",h);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}function P(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function j(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){P(o,r,a,i,c,"next",t)}function c(t){P(o,r,a,i,c,"throw",t)}i(void 0)}))}}function A(t,e){return _.apply(this,arguments)}function _(){return(_=j(regeneratorRuntime.mark((function t(e,n){var r,a,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.getForvardURL(e,n),t.prev=1,t.next=4,fetch(r);case 4:if(200!==(a=t.sent).status){t.next=11;break}return t.next=8,a.json();case 8:return o=t.sent,i=o.results.find((function(t){return"by"===t.components.country_code})),t.abrupt("return",i||o.results[0]);case 11:throw Error();case 14:throw t.prev=14,t.t0=t.catch(1),Error(s.errorsMessage);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))).apply(this,arguments)}function O(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function q(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){O(o,r,a,i,c,"next",t)}function c(t){O(o,r,a,i,c,"throw",t)}i(void 0)}))}}function I(t,e,n){return U.apply(this,arguments)}function U(){return(U=q(regeneratorRuntime.mark((function t(e,n,r){var a,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.getReversURL(e,n,r),t.prev=1,t.next=4,fetch(a);case 4:if(200!==(o=t.sent).status){t.next=10;break}return t.next=8,o.json();case 8:return i=t.sent,t.abrupt("return",i.results[0]);case 10:throw Error();case 13:throw t.prev=13,t.t0=t.catch(1),Error(s.errorsMessage);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function F(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function H(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){F(o,r,a,i,c,"next",t)}function c(t){F(o,r,a,i,c,"throw",t)}i(void 0)}))}}function z(t,e,n){return V.apply(this,arguments)}function V(){return(V=H(regeneratorRuntime.mark((function t(e,n,r){var a,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.getURL(e,n,r),t.prev=1,t.next=4,fetch(a,{headers:{"Access-Control-Allow-Origin":"*"}});case 4:return i=t.sent,t.next=7,i.json();case 7:if(200!==(c=t.sent).code){t.next=10;break}return t.abrupt("return",c.text);case 10:throw Error();case 13:throw t.prev=13,t.t0=t.catch(1),Error(o.errorsMessage);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function W(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function B(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){W(o,r,a,i,c,"next",t)}function c(t){W(o,r,a,i,c,"throw",t)}i(void 0)}))}}function D(){return N.apply(this,arguments)}function N(){return(N=B(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(i.getURL());case 3:if(200!==(e=t.sent).status){t.next=6;break}return t.abrupt("return",e.json());case 6:throw Error();case 9:throw t.prev=9,t.t0=t.catch(0),Error(i.errorsMessage);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function J(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function Z(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){J(o,r,a,i,c,"next",t)}function c(t){J(o,r,a,i,c,"throw",t)}i(void 0)}))}}function Y(t,e,n){return K.apply(this,arguments)}function K(){return(K=Z(regeneratorRuntime.mark((function t(e,n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,1!==r){t.next=7;break}return t.next=4,fetch(c.getCurrentURL(e,n));case 4:a=t.sent,t.next=10;break;case 7:return t.next=9,fetch(c.getForecastURL(e,n));case 9:a=t.sent;case 10:if(200!==a.status){t.next=12;break}return t.abrupt("return",a.json());case 12:throw Error();case 15:throw t.prev=15,t.t0=t.catch(0),Error(c.errorsMessage);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}function $(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function G(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){$(o,r,a,i,c,"next",t)}function c(t){$(o,r,a,i,c,"throw",t)}i(void 0)}))}}function X(){return Q.apply(this,arguments)}function Q(){return(Q=G(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!sessionStorage.navigatorLocation){t.next=4;break}return e=JSON.parse(sessionStorage.navigatorLocation),localStorage.removeItem("navigatorLocation"),t.abrupt("return",e);case 4:return t.next=6,D();case 6:return e=t.sent,n=e.loc,e.lat=+n.split(",")[0],e.lng=+n.split(",")[1],t.abrupt("return",e);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function et(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){tt(o,r,a,i,c,"next",t)}function c(t){tt(o,r,a,i,c,"throw",t)}i(void 0)}))}}function nt(t,e){return rt.apply(this,arguments)}function rt(){return(rt=et(regeneratorRuntime.mark((function t(e,n){var r,a,o,i,c,s,u,l,h,d,p,f,v,g,m,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n,t.prev=1,n.placename){t.next=13;break}return o=localStorage.language||"en",localStorage.language=o,i=e.lat,c=e.lng,a.lat=i,a.lng=c,t.next=10,I(i,c,o);case 10:r=t.sent,t.next=15;break;case 13:a.lat=e.geometry.lat,a.lng=e.geometry.lng;case 15:return s=r.components,u=s.town,l=s.city,h=s.village,d=s.hamlet,p=s.suburb,f=s.county,v=s.state,g=s.country,m=s.continent,y=u||h||d||l||p||f||v,a.timeOffsetSec=r.annotations.timezone.offset_sec,a.placename=y?"".concat(y,", ").concat(g||m):r.formatted,t.abrupt("return",a);case 22:throw t.prev=22,t.t0=t.catch(1),Error(t.t0.message);case 25:case"end":return t.stop()}}),t,null,[[1,22]])})))).apply(this,arguments)}function at(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var it=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=e,this.container=n,this.backgroundImg=null,this.buildApp()}var e,n,o,i,c;return e=t,(n=[{key:"buildApp",value:function(){this.container.insertAdjacentHTML("afterbegin",'\n\t\t\t<div class="preloader">\n\t\t\t\t<div class="preloader--row">\n\t\t\t\t\t<div class="preloader--item"></div>\n\t\t\t\t\t<div class="preloader--item"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="app-wrapper" id="app">\n\t\t\t\t<div class="controll-wrapper" id="control"></div>\n\t\t\t\t<div class="weather--location location"></div>\n\t\t\t\t<div class="info--wrapper">\n\t\t\t\t\t<div class="weather--wrapper" id="weather"></div>\n\t\t\t\t\t<div class="geolocation-wrapper" id="geolocation"></div>\n\t\t\t\t</div>\n\t\t\t\t<span></span><span></span>\n\t\t\t\t<footer class="footer">\n\t\t\t\t\t<div class="footer-container">\n\t\t\t\t\t\t<a href="'.concat(r.link,'" class="rss" target="blank">').concat(r.title,'</a>\n\t\t\t\t\t\t<a href="').concat(a.link,'" class="github" target="blank">').concat(a.title,"</a>\n\t\t\t\t\t</div>\n\t\t\t\t</footer>\n\t\t\t</div>")),localStorage.notFirstTimeLoaded||this.showModal()}},{key:"updateBackground",value:(i=regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:return n=t.sent,this.container.style.backgroundImage="url(".concat(n,")"),t.abrupt("return",1);case 5:case"end":return t.stop()}}),t,this)})),c=function(){var t=this,e=arguments;return new Promise((function(n,r){var a=i.apply(t,e);function o(t){at(a,n,r,o,c,"next",t)}function c(t){at(a,n,r,o,c,"throw",t)}o(void 0)}))},function(t){return c.apply(this,arguments)})},{key:"showModal",value:function(){var t=b("div","modal--info");t.insertAdjacentHTML("afterbegin","".concat('\n <div class="modal--text">\n\t<h1>Fancy Weather</h1>\n\t<span>Voice commands to control:</span>\n\t<ul>\n\t\t<li>voice weather forecast: "weather", "forecast" ("погода", "прогноз")</li>\n\t\t<li>volume increase: "louder" ("громче")</li>\n\t\t<li>volume decrease: "quieter" ("тише")</li>\n\t</ul>\n\n\t<span>Additional functionality:</span>\n\t<ul>\n\t\t<li>a click on the map shows the weather at the specified location;</li>\n\t\t<li>you can share the search results using the link with coordinates.</li>\n\t</ul>\n\n\t<code>Press Esc, Space, Enter or the Close button to close the window</code>\n\t<button class="close-btn">CLOSE</button>\n</div>')),this.container.insertAdjacentElement("afterend",t)}}])&&ot(e.prototype,n),o&&ot(e,o),t}();function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var st=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=e}var e,n,r;return e=t,(n=[{key:"render",value:function(t){this.container=t.querySelector("#control");var e=b("div","control--options","options");e.insertAdjacentHTML("afterbegin",'<button class="options--refresh_btn">\n        <i class="material-icons">autorenew</i>\n      </button>\n      <div class="options--lang-dropdown_menu">\n        <button class="dropbtn lang" id="lang"></button>\n        <div class="dropdown-content">\n          <a class="lang" href="#"></a>\n          <a class="lang" href="#"></a>\n        </div>\n      </div>\n      <div class="options--temp-units">\n\t\t\t\t<button class="options--temp-units '.concat("F"===localStorage.temperatureUnits?"active":"",'">°F</button>\n\t\t\t\t<button class="options--temp-units ').concat("F"!==localStorage.temperatureUnits?"active":"",'">°C</button>\n\t\t\t</div>\n\t\t\t<button class="options--play_btn">\n        <i class="material-icons voice-notification">play_circle_outline</i>\n      </button>\n    '));var n=b("div","control--search","search");n.insertAdjacentHTML("afterbegin",'<form class="search--form">\n      <input class="search--input" type="search" required placeholder="Search city or ZIP"></input>\n      <span class="material-icons recognition">record_voice_over</span>\n      <button class="search-btn">SEARCH</button>\n    </form>'),this.container.insertAdjacentElement("afterbegin",e),this.container.insertAdjacentElement("beforeend",n),this.searchInput=n.querySelector(".search--input"),this.setTranslation()}},{key:"setTranslation",value:function(){var t=k();this.container.querySelectorAll(".lang").forEach((function(e,n){e.textContent=t.lang[n]})),this.searchInput.placeholder=t.placeholder,this.container.querySelector(".search-btn").textContent=t.search}},{key:"clearInput",value:function(){this.searchInput.classList.remove("error"),this.searchInput.value=""}},{key:"showErrorMessage",value:function(){this.searchInput.classList.add("error"),this.searchInput.value=f[localStorage.language]}},{key:"toggleButton",value:function(t,e){var n="speech"===e?".recognition":".voice-notification",r=this.container.querySelector(n);return t?r.classList.add("active"):r.classList.remove("active")}},{key:"submitFormWitchValue",value:function(t){this.searchInput.value=t,this.container.querySelector(".search-btn").click()}},{key:"inputValue",get:function(){return this.searchInput.value}}])&&ct(e.prototype,n),r&&ct(e,r),t}();function ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var dt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.view=new st(this),this.isRecognitionActive=!1}var e,n,r;return e=t,(n=[{key:"render",value:function(){this.view.render(this.container)}},{key:"changeLanguage",value:function(){this.view.setTranslation(),this.recognition&&(this.recognition.lang=document.documentElement.lang)}},{key:"setVoiceNotification",value:function(t){var e=this,n=ut(t,3),r=n[0],a=n[1],o=n[2];return window.speechSynthesis.getVoices(),this.msg=new SpeechSynthesisUtterance,this.msg.text=function(t,e,n){for(var r=k(),a=r.speech,o=localStorage.temperatureUnits,i=e.temp,c=e.app_temp,s=e.wind_spd,u=e.rh,l=e.weather,h=n[0],d=h.max_temp,p=h.low_temp,f="".concat(a.in," ").concat(t.split(", ")[0]," ").concat(a.now," ").concat(Math.round(i),"°\n\t\t").concat(Math.round(i)<0?a.belowZero:""," ").concat("F"===o?a.fahrenheit:a.celsius,".\n\t\t").concat(r.wether[l.code],", ").concat(r.feel," ").concat(Math.round(c),"°,\n\t\t").concat(r.wind," ").concat(Math.round(s)," ").concat(a.ms,",\n\t\t").concat(r.humidity," ").concat(u,"%.\n\t\t").concat(a.dayExpected," ").concat(Math.round(d),"°, ").concat(a.nightExpected," ").concat(Math.round(p),"°. "),v=1;v<=3;v+=1){var g=n[v],m=g.datetime,y=g.max_temp,w=g.low_temp,b=new Date(m).getDay();f+="".concat(a.on," ").concat(r.day[b]," ").concat(a.dayExpected," ").concat(Math.round(y),"°,\n\t\t").concat(a.nightExpected," ").concat(Math.round(w),"°. ")}return f.split("\n").join(" ").split("\t").join("")}(r,a,o),this.msg.onend=function(){return e.toggleVoiceButton(!1)},this.setVoice()}},{key:"setVoice",value:function(){var t=speechSynthesis.getVoices().filter((function(t){return t.lang.includes(document.documentElement.lang)}));this.msg.voice=t[t.length-1]}},{key:"clearInput",value:function(){this.view.clearInput()}},{key:"showErrorMessage",value:function(t){var e=this;this.view.showErrorMessage(t),setTimeout((function(){e.view.clearInput()}),4e3)}},{key:"toggleSpeechRecognition",value:function(){return this.isRecognitionActive?(this.view.toggleButton(!1,"speech"),this.isRecognitionActive=!1,this.recognition.abort()):(this.view.toggleButton(!0,"speech"),this.startRecognizeSpeech())}},{key:"toggleVoiceButton",value:function(t){this.view.toggleButton(t,"voice")}},{key:"startRecognizeSpeech",value:function(){var t=this,e=new(window.SpeechRecognition||window.webkitSpeechRecognition);this.recognition=e,e.lang=document.documentElement.lang,e.interimResults=!0,e.maxAlternatives=1,e.addEventListener("result",(function(e){var n=Array.from(e.results[0]).map((function(t){return t.transcript}));e.results[0].isFinal&&t.сheckSpeechResult(n[0])})),e.addEventListener("end",(function(){return t.isRecognitionActive?e.start():e.stop()})),this.isRecognitionActive=!0,e.start()}},{key:"сheckSpeechResult",value:function(t){var e=k().keyWords;return t.includes(e.weather)||t.includes(e.forecast)?document.querySelector(".voice-notification").click():t.includes(e.louder)?(this.msg.volume<=.8&&(this.msg.volume+=.2),1):t.includes(e.quieter)?(this.msg.volume>=.2&&(this.msg.volume-=.2),1):this.searchCity(t)}},{key:"searchCity",value:function(t){this.view.submitFormWitchValue(t)}},{key:"inputValue",get:function(){return this.view.inputValue}},{key:"msgVoice",get:function(){return this.msg.voice}}])&&ht(e.prototype,n),r&&ht(e,r),t}();function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ft=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=e}var e,n,r;return e=t,(n=[{key:"render",value:function(t){var e=t.querySelector("#weather");e.innerHTML="",this.container=t;var n=this.container.querySelector(".location");n.innerHTML="",n.insertAdjacentHTML("afterbegin",'<div class="location--placename"></div>\n\t\t<div class="location--timeblock">\n\t\t\t<div class="location--timeblock-date date">\n\t\t\t\t<span class="date--day-short"></span>\n\t\t\t\t<span class="date--date"></span>\n\t\t\t\t<span class="date--month"></span>\n\t\t\t</div>\n\t\t\t<div class="location--timeblock-time time"></div>\n\t\t</div>'),e.insertAdjacentHTML("afterbegin",'<div class="weather--current">\n\t\t\t<div class="temperature--block">\n\t\t\t\t<div class="weather--current-temperature temp"></div>\n\t\t\t\t<div class="weather--current-forecast"></div>\n\t\t\t</div>\n\t\t\t<div class="weather--current-details">\n\t\t\t\t<div class="weather--current-details_icon"></div>\n\t\t\t\t<div class="weather--current-details_desc"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="weather--forecast"></div>')}},{key:"updateView",value:function(t,e){var n=t.placename;this.container.querySelector(".location--placename").textContent=n,this.showDate(e),this.showTime(e),this.showCurrentWeather(),this.showForecast(),"F"===localStorage.temperatureUnits&&this.toggleUnits()}},{key:"showDate",value:function(t){var e=k(),n=e.dayShort[t.getDay()],r=e.month[t.getMonth()];this.container.querySelector(".date--day-short").textContent=n,this.container.querySelector(".date--date").textContent=t.getDate(),this.container.querySelector(".date--month").textContent=r}},{key:"showTime",value:function(t){var e=t.getHours();e=(e<10?"0":"")+e;var n=t.getMinutes();n=(n<10?"0":"")+n;var r=t.getSeconds();r=(r<10?"0":"")+r;var a="".concat(e,":").concat(n,":").concat(r);this.container.querySelector(".time").textContent=a}},{key:"showCurrentWeather",value:function(){var t=this.model.currentWeather[0],e=t.temp,n=t.app_temp,r=t.wind_spd,a=t.rh,o=t.weather,i=this.model.forecast.data[0],c=i.max_temp,s=i.low_temp,u=S(o.icon),l=k();this.container.querySelector(".weather--current-temperature").textContent="".concat(Math.round(e),"°"),this.container.querySelector(".weather--current-forecast").innerHTML="",this.container.querySelector(".weather--current-forecast").insertAdjacentHTML("afterbegin",'\n\t\t\t<span class="temperature-day temp">'.concat(Math.round(c),'°</span>\n\t\t\t<span class="temperature-night temp">').concat(Math.round(s),"°</span>\n\t\t")),this.container.querySelector(".weather--current-details_icon").style.backgroundImage="url(".concat(u,")"),this.container.querySelector(".weather--current-details_desc").innerHTML="",this.container.querySelector(".weather--current-details_desc").insertAdjacentHTML("afterbegin","\n\t\t\t<p>".concat(l.wether[o.code],"</p>\n\t\t\t<p>").concat(l.feel,' <span class="temp">').concat(Math.round(n),"°</span></p>\n\t\t\t<p>").concat(l.wind," ").concat(Math.round(r)," ").concat(l.ms,"</p>\n\t\t\t<p>").concat(l.humidity," ").concat(a,"%</p>\n\t\t"))}},{key:"showForecast",value:function(){var t=this.container.querySelector(".weather--forecast");t.innerHTML="";var e=k(),n=this.model.getLocationTime().getDay(),r=0;this.model.forecast.data.forEach((function(a){var o=new Date(a.datetime).getDay();if(o===n||3===r)return 0;var i=S(a.weather.icon),c=b("div","weather--forecast-next_day","next_day");return c.insertAdjacentHTML("afterbegin",'\t<div class="weather--forecast-day_name next_day-name">'.concat(e.day[o],'</div>\n\t\t\t\t<div class="weather--forecast-details next_day-details">\n\t\t\t\t\t<div class="wether--forecast-temperature next_day-temperature">\n\t\t\t\t\t\t<span class="temperature-day temp">').concat(Math.round(a.max_temp),'°</span>\n\t\t\t\t\t\t<span class="temperature-night temp">').concat(Math.round(a.low_temp),'°</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="weather--forecast-icon next_day-icon" style="background-image: url(').concat(i,')"></div>\n\t\t\t\t</div>\n\t\t\t')),r+=1,t.insertAdjacentElement("beforeend",c)}))}},{key:"toggleUnits",value:function(){var t=localStorage.temperatureUnits;this.container.querySelectorAll(".temp").forEach((function(e){var n=parseFloat(e.textContent);e.textContent="".concat(function(t,e){if("F"===e)return Math.round(9*t/5+32);if("C"===e)return Math.round(5*(t-32)/9);throw Error("Invalid value of units")}(n,t),"°")}))}}])&&pt(e.prototype,n),r&&pt(e,r),t}();function vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mt(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function yt(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){mt(o,r,a,i,c,"next",t)}function c(t){mt(o,r,a,i,c,"throw",t)}i(void 0)}))}}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var bt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.view=new ft(this),this.location=null,this.currentWeather=null,this.forecast=null}var e,n,r,a,o,i;return e=t,(n=[{key:"init",value:(i=yt(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.location=e,t.next=3,this.setWeatherInfo();case 3:return t.abrupt("return",1);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"setWeatherInfo",value:(o=yt(regeneratorRuntime.mark((function t(){var e,n,r,a,o,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.location,n=e.lat,r=e.lng,t.prev=1,t.next=4,Promise.all([Y(n,r,1),Y(n,r,3)]);case 4:a=t.sent,o=vt(a,2),i=o[0],c=o[1],this.currentWeather=i.data,this.forecast=c,t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),Error("error receiving weather information");case 15:case"end":return t.stop()}}),t,this,[[1,12]])}))),function(){return o.apply(this,arguments)})},{key:"getLocationTime",value:function(){var t=new Date;return this.location.timeOffsetSec=this.location.timeOffsetSec||60*-t.getTimezoneOffset(),new Date(+t+60*t.getTimezoneOffset()*1e3+1e3*this.location.timeOffsetSec)}},{key:"render",value:function(){this.view.render(this.container),this.view.updateView(this.location,this.getLocationTime()),this.runTime()}},{key:"runTime",value:function(){var t=this;this.timer=setInterval((function(){t.view.showTime(t.getLocationTime())}),1e3)}},{key:"changeLanguage",value:(a=yt(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.previousLanguage,n=localStorage.language,t.next=4,z(this.location.placename.split(", "),e,n);case 4:this.location.placename=t.sent,this.location.placename=this.location.placename[0].split(",").join(", "),this.view.updateView(this.location,this.getLocationTime());case 7:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"changeTempUnits",value:function(){this.view.toggleUnits()}}])&&wt(e.prototype,n),r&&wt(e,r),t}();function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=e}var e,n,r;return e=t,(n=[{key:"render",value:function(t){this.container=t.querySelector("#geolocation"),this.container.innerHTML="",this.container.insertAdjacentHTML("afterbegin",'\n\t\t\t<div class="geolocation--map"></div>\n\t\t\t<div class="geolocation--coordinats">\n\t\t\t\t<span class="lat"></span><br>\n\t\t\t\t<span class="lng"></span>\n\t\t\t</div>'),this.showСoordinates()}},{key:"showСoordinates",value:function(){var t=k(),e=t.lat,n=t.lng,r=this.model.location,a=r.lat,o=r.lng,i=Math.round(Math.abs(a)%1*60),c=Math.round(Math.abs(o)%1*60);a="".concat(e,": ").concat(Math.floor(a),"°").concat(i<10?"0":"").concat(i,"'"),o="".concat(n,": ").concat(Math.floor(o),"°").concat(c<10?"0":"").concat(c,"'"),document.querySelector(".lat").textContent=a,document.querySelector(".lng").textContent=o}}])&&kt(e.prototype,n),r&&kt(e,r),t}();function St(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function Lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=new xt(this),this.container=e,this.location=null}var e,n,r,a,o;return e=t,(n=[{key:"init",value:(a=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X();case 3:return e=t.sent,t.next=6,nt(e,this.location);case 6:this.location=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),this.location=i.defaultLocation;case 12:return t.abrupt("return",1);case 13:case"end":return t.stop()}}),t,this,[[0,9]])})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=a.apply(t,e);function i(t){St(o,n,r,i,c,"next",t)}function c(t){St(o,n,r,i,c,"throw",t)}i(void 0)}))},function(){return o.apply(this,arguments)})},{key:"render",value:function(){this.view.render(this.container),this.initMap()}},{key:"initMap",value:function(){var t=this,e=this.container.querySelector(".geolocation--map"),n=window.google.maps,r=n.Map,a=n.Marker,o=this.location,i={lat:o.lat,lng:o.lng},c=new r(e,{center:i,zoom:11,zoomControl:!0,zoomControlOptions:{position:window.google.maps.ControlPosition.RIGHT_CENTER},mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1});c.addListener("click",(function(e){t.mapMarker.setMap(null),t.mapMarker=new a({position:e.latLng,map:c}),window.location.hash="lat=".concat(e.latLng.lat(),"&lng=").concat(e.latLng.lng()),c.panTo(e.latLng)})),this.map=c,this.mapMarker=new a({position:i,map:c})}},{key:"changeMapCenter",value:function(){var t=this.location,e=t.lat,n=t.lng;this.map.setCenter({lat:e,lng:n}),this.mapMarker.setMap(null),this.mapMarker=new window.google.maps.Marker({position:{lat:e,lng:n},map:this.map}),this.view.showСoordinates()}},{key:"changeLanguage",value:function(){this.view.showСoordinates()}}])&&Lt(e.prototype,n),r&&Lt(e,r),t}();function Rt(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function Tt(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){Rt(o,r,a,i,c,"next",t)}function c(t){Rt(o,r,a,i,c,"throw",t)}i(void 0)}))}}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ct=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.view=new it(this,e),this.control=new dt(e),this.weather=new bt(e),this.geolocation=new Mt(e)}var e,n,r,a,o,i;return e=t,(n=[{key:"init",value:(i=Tt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.language&&(document.documentElement.lang=localStorage.language),t.next=3,this.geolocation.init();case 3:return t.next=5,this.weather.init(this.geolocation.location);case 5:return this.control.setVoiceNotification([this.geolocation.location.placename,this.weather.currentWeather[0],this.weather.forecast.data]),this.control.render(),this.weather.render(),this.geolocation.render(),t.next=11,this.updateBackground();case 11:return t.abrupt("return",this.hidePreloader());case 12:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"updateBackground",value:(o=Tt(regeneratorRuntime.mark((function t(){var e,n,r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.weather.currentWeather[0].weather.description.split(" "),n="d"===this.weather.currentWeather[0].pod?d:p,r=x(this.weather.getLocationTime().getMonth()),a=this.geolocation.location.placename.split(",")[0],o="".concat(e[e.length-1],",").concat(n,",").concat(r,",").concat(a),t.next=7,this.view.updateBackground(o);case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"changeLanguage",value:function(t){localStorage.previousLanguage=localStorage.language,localStorage.language=t,document.documentElement.lang=t,this.control.changeLanguage(),this.weather.changeLanguage(),this.geolocation.changeLanguage(),this.control.setVoiceNotification([this.geolocation.location.placename,this.weather.currentWeather[0],this.weather.forecast.data])}},{key:"changeTempUnits",value:function(){this.weather.changeTempUnits()}},{key:"hidePreloader",value:function(){var t=this;this.container.classList.add("loaded_hiding"),setTimeout((function(){t.container.classList.add("loaded"),t.container.classList.remove("loaded_hiding")}),700)}},{key:"showPreloader",value:function(){var t=this;this.container.classList.add("loaded_hiding"),setTimeout((function(){t.container.classList.remove("loaded"),t.container.classList.remove("loaded_hiding")}),700)}},{key:"findPlace",value:(a=Tt(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.includes("lat=")||!e.includes("lng=")){t.next=6;break}this.geolocation.location.placename="",n={lat:parseFloat(e.split("lat=")[1]),lng:parseFloat(e.split("lng=")[1])},t.next=11;break;case 6:return t.next=8,A(e,"en");case 8:return n=t.sent,window.location.hash="lat=".concat(n.geometry.lat,"&lng=").concat(n.geometry.lng),t.abrupt("return",0);case 11:return this.showPreloader(),t.next=14,nt(n,this.geolocation.location);case 14:return this.geolocation.location=t.sent,t.next=17,this.weather.init(this.geolocation.location);case 17:return this.control.clearInput(),this.weather.render(),this.geolocation.changeMapCenter(),t.next=22,this.updateBackground();case 22:this.control.setVoiceNotification([this.geolocation.location.placename,this.weather.currentWeather[0],this.weather.forecast.data]),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(0),this.control.showErrorMessage(t.t0),this.hidePreloader();case 29:return t.abrupt("return",this.hidePreloader());case 30:case"end":return t.stop()}}),t,this,[[0,25]])}))),function(t){return a.apply(this,arguments)})},{key:"toggleSpeechRecognition",value:function(){this.control.toggleSpeechRecognition()}},{key:"runVoiceNotification",value:function(){if(speechSynthesis.speaking)return speechSynthesis.pause(),this.control.toggleVoiceButton(!1),speechSynthesis.cancel();this.control.msgVoice||this.control.setVoice(),this.control.toggleVoiceButton(!0);var t=setInterval((function(){return speechSynthesis.speaking?speechSynthesis.resume():clearInterval(t)}),14e3);return speechSynthesis.speak(this.control.msg)}},{key:"searchInputValue",get:function(){return this.control.inputValue}}])&&Et(e.prototype,n),r&&Et(e,r),t}();function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var jt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.model=new Ct(e)}var e,n,r;return e=t,r=[{key:"removeModal",value:function(){localStorage.notFirstTimeLoaded=!0,document.addEventListener("keydown",(function(t){13!==t.keyCode&&32!==t.keyCode&&255!==t.keyCode||document.querySelector(".modal--info").remove()})),document.addEventListener("click",(function(t){t.target.classList.contains("close-btn")&&document.querySelector(".modal--info").remove()}))}}],(n=[{key:"start",value:function(){var t,e=((t=b("script")).src=u.getURL(),t.defer=!0,t.async=!0,t);return document.body.insertAdjacentElement("beforeend",e),this.setListeners(),window.location.hash.includes("lat=")&&window.location.hash.includes("&lng=")?this.initWithHashCoordinates():this.initWithNavigatorCoordinates()}},{key:"initWithHashCoordinates",value:function(){var t=window.location.hash,e={lat:parseFloat(t.split("lat=")[1]),lng:parseFloat(t.split("lng=")[1])};sessionStorage.navigatorLocation=JSON.stringify(e),this.model.init()}},{key:"initWithNavigatorCoordinates",value:function(){var t=this;try{navigator.geolocation.getCurrentPosition((function(e){var n={lat:e.coords.latitude,lng:e.coords.longitude};sessionStorage.navigatorLocation=JSON.stringify(n),t.model.init(t.control,t.weather,t.geolocation)}),(function(){return t.model.init()}))}catch(t){this.model.init()}}},{key:"setListeners",value:function(){var e=this;document.addEventListener("click",(function(t){return e.determineTarget(t)})),window.onhashchange=function(t){return e.checkHash(t)},localStorage.notFirstTimeLoaded||t.removeModal()}},{key:"determineTarget",value:function(t){if(t.target.classList.contains("options--refresh_btn")||t.target.parentElement.classList.contains("options--refresh_btn"))return this.model.updateBackground();if(t.target.classList.contains("lang"))return this.model.changeLanguage(t.target.textContent);if(t.target.classList.contains("options--temp-units")&&!t.target.classList.contains("active"))return document.querySelectorAll(".options--temp-units").forEach((function(t){t.classList.remove("active")})),t.target.classList.add("active"),localStorage.temperatureUnits=t.target.textContent.slice(1),this.model.changeTempUnits();if(t.target.classList.contains("search-btn")){t.preventDefault();var e=this.model.searchInputValue;return window.location.hash="",e&&this.model.findPlace(e)}return t.target.classList.contains("recognition")?this.model.toggleSpeechRecognition():t.target.classList.contains("voice-notification")?this.model.runVoiceNotification():0}},{key:"checkHash",value:function(){var t=window.location.hash;t.includes("lat")&&t.includes("lng")&&this.model.findPlace(t)}}])&&Pt(e.prototype,n),r&&Pt(e,r),t}();window.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("app-container");new jt(t).start()}))}});